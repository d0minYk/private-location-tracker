(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{267:function(e,t,a){var n=a(0);function o(e){return n.createElement("svg",e,[n.createElement("title",{key:0},"ionicons-v5-a"),n.createElement("path",{d:"M456,128a40,40,0,0,0-37.23,54.6L334.6,266.77a39.86,39.86,0,0,0-29.2,0L245.23,206.6a40,40,0,1,0-74.46,0L70.6,306.77A40,40,0,1,0,93.23,329.4L193.4,229.23a39.86,39.86,0,0,0,29.2,0l60.17,60.17a40,40,0,1,0,74.46,0l84.17-84.17A40,40,0,1,0,456,128Z",key:1})])}o.defaultProps={width:"512",height:"512",viewBox:"0 0 512 512"},e.exports=o,o.default=o},268:function(e,t,a){var n=a(0);function o(e){return n.createElement("svg",e,[n.createElement("title",{key:0},"ionicons-v5-h"),n.createElement("path",{d:"M104,160a56,56,0,1,1,56-56A56.06,56.06,0,0,1,104,160Z",key:1}),n.createElement("path",{d:"M256,160a56,56,0,1,1,56-56A56.06,56.06,0,0,1,256,160Z",key:2}),n.createElement("path",{d:"M408,160a56,56,0,1,1,56-56A56.06,56.06,0,0,1,408,160Z",key:3}),n.createElement("path",{d:"M104,312a56,56,0,1,1,56-56A56.06,56.06,0,0,1,104,312Z",key:4}),n.createElement("path",{d:"M256,312a56,56,0,1,1,56-56A56.06,56.06,0,0,1,256,312Z",key:5}),n.createElement("path",{d:"M408,312a56,56,0,1,1,56-56A56.06,56.06,0,0,1,408,312Z",key:6}),n.createElement("path",{d:"M104,464a56,56,0,1,1,56-56A56.06,56.06,0,0,1,104,464Z",key:7}),n.createElement("path",{d:"M256,464a56,56,0,1,1,56-56A56.06,56.06,0,0,1,256,464Z",key:8}),n.createElement("path",{d:"M408,464a56,56,0,1,1,56-56A56.06,56.06,0,0,1,408,464Z",key:9})])}o.defaultProps={width:"512",height:"512",viewBox:"0 0 512 512"},e.exports=o,o.default=o},269:function(e,t,a){var n=a(0);function o(e){return n.createElement("svg",e,[n.createElement("title",{key:0},"ionicons-v5-f"),n.createElement("path",{d:"M376,160H272V313.37l52.69-52.68a16,16,0,0,1,22.62,22.62l-80,80a16,16,0,0,1-22.62,0l-80-80a16,16,0,0,1,22.62-22.62L240,313.37V160H136a56.06,56.06,0,0,0-56,56V424a56.06,56.06,0,0,0,56,56H376a56.06,56.06,0,0,0,56-56V216A56.06,56.06,0,0,0,376,160Z",key:1}),n.createElement("path",{d:"M272,48a16,16,0,0,0-32,0V160h32Z",key:2})])}o.defaultProps={width:"512",height:"512",viewBox:"0 0 512 512"},e.exports=o,o.default=o},270:function(e,t,a){e.exports=a.p+"static/media/appstore.e7ddcc40.png"},272:function(e,t,a){e.exports=a(610)},484:function(e,t){},486:function(e,t){},517:function(e,t){},519:function(e,t){},520:function(e,t){},525:function(e,t){},527:function(e,t){},534:function(e,t){},536:function(e,t){},554:function(e,t){},557:function(e,t){},573:function(e,t){},576:function(e,t){},584:function(e,t,a){},590:function(e,t,a){},592:function(e,t,a){var n=a(0);function o(e){return n.createElement("svg",e,[n.createElement("title",{key:0},"ionicons-v5-o"),n.createElement("path",{d:"M160,256a16,16,0,0,1,16-16H320V136c0-32-33.79-56-64-56H104a56.06,56.06,0,0,0-56,56V376a56.06,56.06,0,0,0,56,56H264a56.06,56.06,0,0,0,56-56V272H176A16,16,0,0,1,160,256Z",key:1}),n.createElement("path",{d:"M459.31,244.69l-80-80a16,16,0,0,0-22.62,22.62L409.37,240H320v32h89.37l-52.68,52.69a16,16,0,1,0,22.62,22.62l80-80a16,16,0,0,0,0-22.62Z",key:2})])}o.defaultProps={width:"512",height:"512",viewBox:"0 0 512 512"},e.exports=o,o.default=o},610:function(e,t,a){"use strict";a.r(t);a(273);var n=a(0),o=a.n(n),r=a(91),i=a.n(r),s=a(27),c=a(28),l=a(42),u=a(41),d=a(43),p=a(611),h=a(612),m=a(613),f=a(123),y=a(16),g=a.n(y),v=a(44),b=a(264),k=a(127),E=a.n(k),w=a(128),x=a.n(w),S=(a(584),a(3)),O=a.n(S),C=a(258),D=a(262),M=a(257),j=a(259),T=a(261),A=a(265),N=a.n(A),L=(a(589),a(590),a(260)),_=a(4),R=(a(591),null),F=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).polyRef=o.a.createRef(),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(e){console.log("_______________UNMOUNT");var t=this.polyRef.current.props.leaflet.map;R.removeFrom(t)}},{key:"componentDidMount",value:function(){console.log("_______________DIDMOUNT");var e=this.polyRef.current.leafletElement,t=this.polyRef.current.props.leaflet.map;(R=O.a.polylineDecorator(e,{patterns:[{offset:0,repeat:50,symbol:O.a.Symbol.arrowHead({pixelSize:8,polygon:!1,pathOptions:{stroke:!0,color:"#333047"}})}]})).addTo(t)}},{key:"render",value:function(){return o.a.createElement(L.a,Object.assign({ref:this.polyRef},this.props,{color:"#403C58"}))}}]),t}(n.Component),I=Object(_.d)(F),B=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,null,[{key:"shorten",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ";return e.length<=t?e:e.substr(0,e.lastIndexOf(a,t))+" ..."}},{key:"shortenToChar",value:function(e,t){return e.length<=t?e:e.substr(0,t)}},{key:"formatDate",value:function(e,t){var a=new Date;void 0!==e&&(a=new Date(e));var n,o,r,i,s,c="";switch(t){case"DD/MM/YY":(n=a.getMonth()+1)<10&&(n="0"+n),(o=a.getDate())<10&&(o="0"+o),c=o+"/"+n+"/"+((r=a.getFullYear())+"").substr(0,2);break;case"HH:MM DD/MM/YYYY":n=a.getMonth()+1,o=a.getDate(),r=a.getFullYear(),n<10&&(n="0"+n),o<10&&(o="0"+o),(i=a.getHours())<10&&(i="0"+i),(s=a.getMinutes())<10&&(s="0"+s),c=i+":"+s+" "+o+"/"+n+"/"+r;break;case"mm DD":n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][a.getMonth()],(o=a.getDate())<10&&(o="0"+o),c=n+" "+o;break;default:(n=a.getMonth()+1)<10&&(n="0"+n),(r=a.getFullYear())<10&&(r="0"+r),(o=a.getDate())<10&&(o="0"+o),(i=a.getHours())<10&&(i="0"+i),(s=a.getMinutes())<10&&(s="0"+s),c=r+"-"+n+"-"+o+" "+i+":"+s}return c}}]),e}(),P=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).preventScrollEventFiring=!1,a.state={zoom:13,center:[51.505,-.09],locations:null},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.mode!==this.props.mode||(!e.locations||!this.props.locations||e.locations.length!==this.props.locations.length)}},{key:"render",value:function(){var e=this,t=JSON.parse(JSON.stringify(this.props.locations));console.log(t,"===============------------------------");var a=t.map(function(e){return[parseFloat(e.lat),parseFloat(e.lng)]});return o.a.createElement("div",{id:"map-container","data-data":this.props.mapTest},o.a.createElement(C.a,{id:"main-map",className:"markercluster-map",center:this.state.center,zoom:this.state.zoom,ref:this.props.mapRef,zoomControl:!1,maxZoom:19},o.a.createElement(D.a,{attribution:'Map data \xa9 <a href="http://openstreetmap.org">OpenStreetMap</a>',url:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),o.a.createElement(M.a,{ref:this.props.groupRef},o.a.createElement(N.a,null,this.props.locations&&0!==this.props.locations.length&&"path"===this.props.mode&&o.a.createElement(I,{positions:a}),this.props.locations&&"point"===this.props.mode&&this.props.locations.map(function(t){return o.a.createElement(j.a,{position:[t.lat,t.lng],onClick:function(){e.props.onMarkerClick(t.id)},icon:new S.divIcon({className:"marker",html:'<div class="marker-custom"></div>'})},o.a.createElement(T.a,null,o.a.createElement("p",null,B.formatDate(t.date,"HH:MM DD/MM/YYYY")),t.house||t.street||t.city||t.country?o.a.createElement("p",{style:{marginBottom:0}},t.house&&t.house+" ",t.street&&t.street+" ",t.city&&t.city+" ",t.country&&t.country+" "):o.a.createElement("p",{style:{marginBottom:0}},t.lat,",",t.lng)))})))))}}]),t}(o.a.Component),Y=(a(592),a(267)),H=a.n(Y),Z=a(268),U=a.n(Z),V=a(269),W=a.n(V),J=a(270),z=a.n(J),K=a(593),G=a(173).Dropbox,q=null,Q=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onInputChange=function(e){var t=e.target.id,n=e.target.value,o=Object(b.a)({},a.state);o[t]=n,a.setState(o)},a.mapRef=Object(n.createRef)(),a.groupRef=Object(n.createRef)(),a.selectedLocationRef=Object(n.createRef)(),a.state={dropboxAuthCode:"",encryptionKey:"",loadingStatus:null,loggedIn:!1,selectedDay:null,selectedLocation:null,days:[],day:null,mode:"path",loading:!0},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"fitBounds",value:function(){setTimeout(function(){if(this.state.day&&0!==this.state.day.length){var e=this.groupRef.current.leafletElement,t=this.mapRef.current.leafletElement,a=e.getBounds();t.fitBounds(a)}}.bind(this),500)}},{key:"loadDay",value:function(){var e=Object(v.a)(g.a.mark(function e(t){var a,n,o,r,i;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({selectedDay:t,loadingStatus:"Loading "+t.replace(".txt","")+" (0%)"}),-1===t.indexOf(".txt")){e.next=9;break}return e.next=4,new Promise(function(e,a){window.dropbox.filesDownload({path:"/"+t}).then(function(){var t=Object(v.a)(g.a.mark(function t(n){var o;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(o=new FileReader).onload=Object(v.a)(g.a.mark(function t(){var n;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:try{n=E.a.decrypt(this.result,q).toString(x.a),e(JSON.parse(n))}catch(o){a(o)}case 1:case"end":return t.stop()}},t,this)})),o.readAsText(n.fileBlob);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(e){a(e)})});case 4:for(a=e.sent,n=0;n<a.length;n++)a[n].id||(a[n].id=Math.round(new Date(a[n].date).getTime())),a[n].longitude=parseFloat(a[n].lng),a[n].latitude=parseFloat(a[n].lat),a[n].bearing=parseFloat(a[n].bearing),a[n].heading=parseFloat(a[n].heading),a[n].altitude=parseFloat(a[n].altitude),a[n].speed=parseFloat(a[n].speed);this.setState({day:a.sort(function(e,t){return e.id>t.id}),loadingStatus:null},function(){this.setState({mode:"path"===this.state.mode?"point":"path"},function(){setTimeout(function(){this.setState({mode:"path"===this.state.mode?"point":"path"})}.bind(this),200)})}),e.next=27;break;case 9:return e.next=11,window.dropbox.filesListFolder({path:"/"+t,limit:2e3});case 11:o=e.sent,r=o.entries;case 13:if(!o.has_more){e.next=20;break}return e.next=16,window.dropbox.filesListFolderContinue({cursor:o.cursor});case 16:o=e.sent,r=r.concat(o.entries),e.next=13;break;case 20:return r=(r=r.map(function(e){return e.name})).sort().reverse(),i=[],e.next=25,new Promise(function(){var e=Object(v.a)(g.a.mark(function e(a,n){var o,s,c=this;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=g.a.mark(function e(n){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Requesting"),new Promise(function(e,a){var o=r[n],i=o.replace(".txt","");window.dropbox.filesDownload({path:"/"+t+"/"+o}).then(function(){var t=Object(v.a)(g.a.mark(function t(n){var r;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(r=new FileReader).onload=Object(v.a)(g.a.mark(function t(){var n;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:try{n=E.a.decrypt(this.result,q).toString(x.a),e({content:JSON.parse(n),fileSub:o,fileSubId:i})}catch(r){a(r)}case 1:case"end":return t.stop()}},t,this)})),r.readAsText(n.fileBlob);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(e){a(e)})}).then(function(e){var n=e.content;n.id=e.fileSubId,n.longitude=parseFloat(n.lng),n.latitude=parseFloat(n.lat),n.bearing=parseFloat(n.bearing),n.heading=parseFloat(n.heading),n.altitude=parseFloat(n.altitude),n.speed=parseFloat(n.speed),i.push(n),this.setState({loadingStatus:"Loading "+t.replace(".txt","")+" ("+Math.round(i.length/r.length*100)+"%)"}),i.length===r.length&&a()}.bind(c)),e.next=4,new Promise(function(e,t){setTimeout(function(){e()}.bind(this),200)});case 4:case"end":return e.stop()}},e)}),s=0;case 2:if(!(s<r.length)){e.next=7;break}return e.delegateYield(o(s),"t0",4);case 4:s++,e.next=2;break;case 7:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}().bind(this)).catch(function(e){console.log("FAILED",e),this.setState({loadingStatus:null}),alert("Failed to get some locations, please try again")});case 25:console.log("YUP< GOT IT ALL",i),this.setState({day:i.sort(function(e,t){return e.id>t.id}),loadingStatus:null},function(){this.setState({mode:"path"===this.state.mode?"point":"path"},function(){setTimeout(function(){this.setState({mode:"path"===this.state.mode?"point":"path"})}.bind(this),200)})});case 27:this.fitBounds();case 28:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"loadDays",value:function(){var e=Object(v.a)(g.a.mark(function e(){var t,a,n,o,r;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loadingStatus:"Loading days"}),e.next=3,window.dropbox.filesListFolder({path:"",limit:2e3});case 3:t=e.sent,a=t.entries;case 5:if(!t.has_more){e.next=12;break}return e.next=8,window.dropbox.filesListFolderContinue({cursor:t.cursor});case 8:t=e.sent,a=a.concat(t.entries),e.next=5;break;case 12:a=(a=a.map(function(e){return e.name})).sort().reverse(),n=0;case 15:if(!(n<a.length)){e.next=28;break}if("DO-NOT-DELETE-encryption-validator.txt"!==(o=a[n])){e.next=21;break}return a.splice(n,1),n--,e.abrupt("continue",25);case 21:if(-1===o.indexOf(".txt")){e.next=25;break}return r=o.replace(".txt",""),a.splice(a.indexOf(r),1),e.abrupt("continue",25);case 25:n++,e.next=15;break;case 28:this.setState({days:a,loading:!1,loadingStatus:null});case 29:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){window.location.href;this.props.match.params&&this.props.match.params.authcode&&this.props.match.params.encryptionkey&&this.setState({dropboxAuthCode:this.props.match.params.authcode,encryptionPhrase:this.props.match.params.encryptionkey.replace(/-/g," ")},function(){this.login()})}},{key:"downloadDay",value:function(){var e=document.createElement("a");e.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(this.state.day))),e.setAttribute("download",this.state.selectedDay.replace(".txt","")+".json"),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}},{key:"login",value:function(){var e=Object(v.a)(g.a.mark(function e(){var t,a,n,o=this;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({errorMsg:null,loadingStatus:"Authenticating"}),this.state.dropboxAuthCode&&this.state.encryptionPhrase){e.next=4;break}return this.setState({errorMsg:"Please enter both your dropdox auth code and encryption key",loadingStatus:null}),e.abrupt("return");case 4:return window.dropbox=new G({accessToken:this.state.dropboxAuthCode}),e.next=7,new Promise(function(e,t){window.dropbox.filesDownload({path:"/DO-NOT-DELETE-encryption-validator.txt"}).then(function(){var t=Object(v.a)(g.a.mark(function t(a){var n;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(n=new FileReader).onload=Object(v.a)(g.a.mark(function t(){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e(this.result);case 1:case"end":return t.stop()}},t,this)})),n.readAsText(a.fileBlob);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}().bind(this)).catch(function(e){return!e||400!==e.status&&401!==e.status?e&&404===e.status?t("No Locations Detected"):t("Unexpected Error"):t("Invalid Authentication Code")}.bind(this))}).catch(function(e){o.setState({errorMsg:e,loadingStatus:null})});case 7:if(!(t=e.sent)){e.next=28;break}return e.prev=9,e.next=12,K.mnemonicToSeed(this.state.encryptionPhrase).then(function(e){return e.toString("hex")});case 12:a=e.sent,n=E.a.decrypt(t,a).toString(x.a),e.next=21;break;case 16:return e.prev=16,e.t0=e.catch(9),console.log(e.t0),this.setState({errorMsg:"Invalid Encryption Key",loadingStatus:null}),e.abrupt("return");case 21:if("Check out https://www.facebook.com/AnimalSanctuary.TH/"!==n){e.next=26;break}q=a,this.setState({encryptionKey:a,loggedIn:!0},function(){this.loadDays()}),e.next=28;break;case 26:return this.setState({errorMsg:"Invalid Encryption Key",loadingStatus:null}),e.abrupt("return");case 28:case"end":return e.stop()}},e,this,[[9,16]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.loggedIn?o.a.createElement("div",{className:"dashboard"},null!==this.state.loadingStatus&&o.a.createElement("div",{className:"full-screen-loading"},o.a.createElement("div",null,o.a.createElement("svg",{className:"spinner",viewBox:"0 0 50 50"},o.a.createElement("circle",{className:"path",cx:"25",cy:"25",r:"20",fill:"none",strokeWidth:"5"})),o.a.createElement("h1",null,this.state.loadingStatus))),o.a.createElement("div",{className:"days"},o.a.createElement("h2",null,"Days"),this.state.days&&o.a.createElement("div",{className:"list"},this.state.days.map(function(t){return o.a.createElement("span",{key:t,"data-selected":e.state.selectedDay===t,style:{fontWeight:700},onClick:function(){e.loadDay(t)}},t.replace(".txt",""))}))),o.a.createElement("div",{className:"locations"},o.a.createElement("h2",null,"Locations"),this.state.day&&o.a.createElement("div",{className:"list"},this.state.day.map(function(t){return o.a.createElement("div",{ref:e.selectedLocationRef,"data-selected":e.state.selectedLocation===t.id,onClick:function(){e.setState({selectedLocation:t.id}),e.mapRef.current.leafletElement.setView({lat:t.lat,lng:t.lng},21)}},o.a.createElement("p",{style:{fontWeight:700,marginTop:4,marginBottom:0}},B.formatDate(t.date,"HH:MM DD/MM/YYYY")),t.house||t.street||t.city||t.country?o.a.createElement("p",{style:{marginBottom:0}},t.house&&t.house+" ",t.street&&t.street+" ",t.city&&t.city+" ",t.country&&t.country+" "):o.a.createElement("p",{style:{marginBottom:0}},t.lat,",",t.lng))})),!this.state.day&&o.a.createElement("div",{className:"list"},o.a.createElement("div",{style:{border:"none"}},o.a.createElement("p",{style:{marginBotton:0}},"Select a day to inspect locations")))),o.a.createElement("div",{className:"map"},o.a.createElement(P,Object(f.a)({locations:this.state.day?this.state.day:[],mapRef:this.mapRef,groupRef:this.groupRef,onMarkerClick:this.onMarkerClick,mode:this.state.mode},"onMarkerClick",function(){var t=Object(v.a)(g.a.mark(function t(a){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log("ID: "+a),e.setState({selectedLocation:a},function(){setTimeout(function(){console.log(this.selectedLocationRef)}.bind(this),100)});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()))),this.state.day&&o.a.createElement("div",{className:"options"},"path"===this.state.mode?o.a.createElement(H.a,{onClick:function(){e.setState({mode:"point"})}}):o.a.createElement(U.a,{onClick:function(){e.setState({mode:"path"})}}),o.a.createElement(W.a,{onClick:function(){e.downloadDay()}}))):o.a.createElement("div",{className:"login"},null!==this.state.loadingStatus&&o.a.createElement("div",{className:"full-screen-loading"},o.a.createElement("div",null,o.a.createElement("svg",{className:"spinner",viewBox:"0 0 50 50"},o.a.createElement("circle",{className:"path",cx:"25",cy:"25",r:"20",fill:"none",strokeWidth:"5"})),o.a.createElement("h1",null,this.state.loadingStatus))),o.a.createElement("div",{className:"login-container"},o.a.createElement("h1",null,"Log in"),o.a.createElement("p",null,"The authentication and encryption keys are only saved to this browser tab and deleted when this tab is closed."),o.a.createElement("div",{className:"form"},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Dropbox Auth Code"),o.a.createElement("input",{onChange:this.onInputChange,defaultValue:this.state.dropboxAuthCode,type:"auth-code",name:"auth-code",id:"dropboxAuthCode",placeholder:"Dropbox Auth Code"})),o.a.createElement("p",{style:{marginTop:-5,cursor:"pointer"},onClick:function(){window.open("/get-auth-code")}},"Get Dropbox Auth Code"),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Encryption Key"),o.a.createElement("input",{onChange:this.onInputChange,defaultValue:this.state.encryptionPhrase,type:"encryption-key",name:"encryption-key",id:"encryptionPhrase",placeholder:"Encryption Key"})),o.a.createElement("button",{className:"register-btn button primary",onClick:function(t){e.login(t)}},"Log in"),o.a.createElement("a",{style:{padding:0},href:"https://itunes.apple.com/gb/app/id1512069004",target:"_blank"},o.a.createElement("img",{src:z.a})),this.state.errorMsg&&o.a.createElement("div",{className:"error-msg"},this.state.errorMsg))))}}]),t}(n.Component),$=a(173).Dropbox,X=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={authCode:"",authLink:"",copyToClipboardText:"Copy Code"},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){if(this.props.location&&-1!==this.props.location.hash.indexOf("access_token")){console.log("GOT IT: "+this.props.location.hash);var e={};this.props.location.hash.split("&").forEach(function(t){var a=t.replace(/\+/g," ").split("="),n=a.shift(),o=a.length>0?a.join("="):void 0;n=decodeURIComponent(n),o=void 0===o?null:decodeURIComponent(o),void 0===e[n]?e[n]=o:Array.isArray(e[n])?e[n].push(o):e[n]=[e[n],o]}),e["#access_token"]&&this.setState({authCode:e["#access_token"],authLink:""})}else{var t=new $({clientId:"5o4k8uv2pegwprw"}).getAuthenticationUrl("https://d0minyk.github.io/private-location-tracker/get-auth-code");this.setState({authLink:t})}}},{key:"authenticate",value:function(){}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"login"},o.a.createElement("div",{className:"login-container"},o.a.createElement("h1",null,this.state.authCode?"Successfully Authenticated":"Authenticate Dropbox"),o.a.createElement("p",null,this.state.authCode?"Copy the below code into the application":"Get an authentication code from Dropbox that let's you to back up your locations."),o.a.createElement("div",{className:"form"},this.state.authCode&&o.a.createElement("div",{className:"code",style:{wordBreak:"break-all"}},this.state.authCode),this.state.authCode&&o.a.createElement("button",{style:{width:"100%",marginTop:15},onClick:function(){navigator&&navigator.clipboard?navigator.clipboard.writeText(e.state.authCode).then(function(){this.setState({copyToClipboardText:"Copied!"})}.bind(e),function(e){this.setState({copyToClipboardText:"Failed to copy!"})}.bind(e)):e.setState({copyToClipboardText:"Failed to copy!"})}},this.state.copyToClipboardText),this.state.authLink&&o.a.createElement("a",{style:{width:"100%",margin:0},href:this.state.authLink,className:"register-btn button primary"},"Log in"))))}}]),t}(n.Component),ee=(a(173).Dropbox,function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"terms",style:{margin:15}},o.a.createElement("h1",null,"Legal"),o.a.createElement("p",null,"Your access to and use of the app is conditioned upon your acceptance of and compliance with these Terms and Conditions and Privacy Policy. If you disagree with any part then you do not have permission to use our service."),o.a.createElement("ul",{class:"links"},o.a.createElement("li",null,o.a.createElement("a",{href:"#terms"},"Terms and Conditions (Last updated 19/05/2020)")),o.a.createElement("li",null,o.a.createElement("a",{href:"#privacy"},"Privacy Policy (Last updated 19/05/2020)"))),o.a.createElement("div",{id:"terms"},o.a.createElement("h2",null,"Terms & Conditions"),o.a.createElement("h3",null,"Disclaimer"),o.a.createElement("p",null,'Your use of the Service is at your sole risk. The Service is provided on an "AS IS" and "AS AVAILABLE" basis. The Service is provided without warranties of any kind, whether express or implied.'),o.a.createElement("p",null,"Only you hold your encrpytion keys, losing them will make all your locations inaccessble."),o.a.createElement("p",null,"We do not warrant that"),o.a.createElement("ul",null,o.a.createElement("li",null,"the Service will function uninterrupted, secure or available at any particular time or location"),o.a.createElement("li",null,"any errors or defects will be corrected"))),o.a.createElement("div",{id:"privacy"},o.a.createElement("h2",null,"Privacy Policy"),o.a.createElement("p",null,"We cannot and will not collect, use or share your personal information and locations with anyone.")))}}]),t}(n.Component)),te=function(e){function t(e){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(p.a,null,o.a.createElement("div",{style:{background:"white"}},o.a.createElement(h.a,null,o.a.createElement(m.a,{path:"/private-location-tracker/",component:Q,exact:!0}),o.a.createElement(m.a,{path:"/private-location-tracker/terms",component:ee,exact:!0}),o.a.createElement(m.a,{path:"/private-location-tracker/get-auth-code",component:X,exact:!0}),o.a.createElement(m.a,{path:"/private-location-tracker/:authcode/:encryptionkey",component:Q,exact:!0})))))}}]),t}(n.Component),ae=(a(609),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function ne(e){navigator.serviceWorker.register(e).then(function(e){console.log("REG",e),e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(o.a.createElement(te,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/private-location-tracker",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/private-location-tracker","/service-worker.js");ae?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ne(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):ne(e)})}}()}},[[272,1,2]]]);
//# sourceMappingURL=main.1b4b689f.chunk.js.map