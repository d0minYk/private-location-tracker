{"version":3,"sources":["icons/analytics.svg","icons/apps.svg","icons/download.svg","icons/appstore.png","icons/log-out.svg","PolylineDecorator.js","Utilities.js","Map.js","Dashboard.js","DropboxAuth.js","Terms.js","App.js","registerServiceWorker.js","index.js"],"names":["React","__webpack_require__","Analytics","props","createElement","key","d","defaultProps","width","height","viewBox","module","exports","default","Apps","Download","p","LogOut","layerAhh","PolylineDecorator","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","polyRef","createRef","nextProps","console","log","map","current","leaflet","removeFrom","polyline","leafletElement","L","polylineDecorator","patterns","offset","repeat","symbol","Symbol","arrowHead","pixelSize","polygon","pathOptions","stroke","color","addTo","react_default","a","Polyline","assign","ref","Component","withLeaflet","Utilities","str","maxLen","separator","arguments","length","undefined","substr","lastIndexOf","dateObj","format","Date","months","days","years","hours","minutes","dateStr","getMonth","getDate","getFullYear","getHours","getMinutes","MapC","preventScrollEventFiring","state","zoom","center","locations","nextState","mode","_this2","JSON","parse","stringify","path","item","parseFloat","lat","lng","id","data-data","mapTest","Map","className","mapRef","zoomControl","maxZoom","TileLayer","attribution","url","FeatureGroup","groupRef","dist_default","src_PolylineDecorator","positions","Marker","position","onClick","onMarkerClick","icon","divIcon","html","Popup","formatDate","date","house","street","city","country","style","marginBottom","bip39","require","DropboxSDK","Dropbox","encryptionKey","Dashboard","onInputChange","e","modifiedField","target","modifiedFieldValue","value","objectSpread","setState","selectedLocationRef","dropboxAuthCode","loadingStatus","loggedIn","selectedDay","selectedLocation","day","loading","setTimeout","group","bounds","getBounds","fitBounds","bind","replace","indexOf","Promise","resolve","reject","window","dropbox","filesDownload","then","_ref","asyncToGenerator","regenerator_default","mark","_callee2","data","fr","wrap","_context2","prev","next","FileReader","onload","_callee","decrypted","_context","AES","decrypt","result","toString","EncUTF8","stop","readAsText","fileBlob","_x2","apply","catch","error","content","j","Math","round","getTime","longitude","latitude","bearing","heading","altitude","speed","sort","b","filesListFolder","limit","dayFiles","allDayFiles","entries","has_more","filesListFolderContinue","cursor","concat","name","reverse","contents","_ref3","_callee5","_loop","_j","_context6","_context5","fileSub","fileSubId","_ref4","_callee4","_context4","_callee3","_context3","_x5","push","delegateYield","_x3","_x4","err","alert","newFiles","allFiles","i","file","splice","folderName","location","href","match","params","authcode","encryptionkey","encryptionPhrase","login","element","document","setAttribute","encodeURIComponent","display","body","appendChild","click","removeChild","errorMsg","accessToken","_ref6","_callee9","_context10","_callee8","_context9","_x6","status","_this3","retrievedEncryptedValidator","mnemonicToSeed","bytes","seed","_context11","t0","loadDays","_this4","cx","cy","r","fill","strokeWidth","data-selected","fontWeight","loadDay","setView","marginTop","border","marginBotton","src_Map","defineProperty","_ref8","_callee11","_context12","_x7","analytics_default","apps_default","download_default","downloadDay","onChange","defaultValue","type","placeholder","open","padding","src","DownloadFromAppStore","DropboxAuth","authCode","authLink","copyToClipboardText","hash","ret","split","forEach","param","parts","shift","val","join","decodeURIComponent","Array","isArray","authUrl","clientId","getAuthenticationUrl","wordBreak","navigator","clipboard","writeText","margin","Terms","class","App","BrowserRouter","background","Switch","Route","component","exact","isLocalhost","Boolean","hostname","registerValidSW","swUrl","serviceWorker","register","registration","active","onstatechange","onupdatefound","installingWorker","installing","controller","ReactDOM","render","src_App","getElementById","URL","process","origin","addEventListener","fetch","response","headers","get","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.95bf1b7f.chunk.js","sourcesContent":["var React = require('react');\n\nfunction Analytics (props) {\n    return React.createElement(\"svg\",props,[React.createElement(\"title\",{\"key\":0},\"ionicons-v5-a\"),React.createElement(\"path\",{\"d\":\"M456,128a40,40,0,0,0-37.23,54.6L334.6,266.77a39.86,39.86,0,0,0-29.2,0L245.23,206.6a40,40,0,1,0-74.46,0L70.6,306.77A40,40,0,1,0,93.23,329.4L193.4,229.23a39.86,39.86,0,0,0,29.2,0l60.17,60.17a40,40,0,1,0,74.46,0l84.17-84.17A40,40,0,1,0,456,128Z\",\"key\":1})]);\n}\n\nAnalytics.defaultProps = {\"width\":\"512\",\"height\":\"512\",\"viewBox\":\"0 0 512 512\"};\n\nmodule.exports = Analytics;\n\nAnalytics.default = Analytics;\n","var React = require('react');\n\nfunction Apps (props) {\n    return React.createElement(\"svg\",props,[React.createElement(\"title\",{\"key\":0},\"ionicons-v5-h\"),React.createElement(\"path\",{\"d\":\"M104,160a56,56,0,1,1,56-56A56.06,56.06,0,0,1,104,160Z\",\"key\":1}),React.createElement(\"path\",{\"d\":\"M256,160a56,56,0,1,1,56-56A56.06,56.06,0,0,1,256,160Z\",\"key\":2}),React.createElement(\"path\",{\"d\":\"M408,160a56,56,0,1,1,56-56A56.06,56.06,0,0,1,408,160Z\",\"key\":3}),React.createElement(\"path\",{\"d\":\"M104,312a56,56,0,1,1,56-56A56.06,56.06,0,0,1,104,312Z\",\"key\":4}),React.createElement(\"path\",{\"d\":\"M256,312a56,56,0,1,1,56-56A56.06,56.06,0,0,1,256,312Z\",\"key\":5}),React.createElement(\"path\",{\"d\":\"M408,312a56,56,0,1,1,56-56A56.06,56.06,0,0,1,408,312Z\",\"key\":6}),React.createElement(\"path\",{\"d\":\"M104,464a56,56,0,1,1,56-56A56.06,56.06,0,0,1,104,464Z\",\"key\":7}),React.createElement(\"path\",{\"d\":\"M256,464a56,56,0,1,1,56-56A56.06,56.06,0,0,1,256,464Z\",\"key\":8}),React.createElement(\"path\",{\"d\":\"M408,464a56,56,0,1,1,56-56A56.06,56.06,0,0,1,408,464Z\",\"key\":9})]);\n}\n\nApps.defaultProps = {\"width\":\"512\",\"height\":\"512\",\"viewBox\":\"0 0 512 512\"};\n\nmodule.exports = Apps;\n\nApps.default = Apps;\n","var React = require('react');\n\nfunction Download (props) {\n    return React.createElement(\"svg\",props,[React.createElement(\"title\",{\"key\":0},\"ionicons-v5-f\"),React.createElement(\"path\",{\"d\":\"M376,160H272V313.37l52.69-52.68a16,16,0,0,1,22.62,22.62l-80,80a16,16,0,0,1-22.62,0l-80-80a16,16,0,0,1,22.62-22.62L240,313.37V160H136a56.06,56.06,0,0,0-56,56V424a56.06,56.06,0,0,0,56,56H376a56.06,56.06,0,0,0,56-56V216A56.06,56.06,0,0,0,376,160Z\",\"key\":1}),React.createElement(\"path\",{\"d\":\"M272,48a16,16,0,0,0-32,0V160h32Z\",\"key\":2})]);\n}\n\nDownload.defaultProps = {\"width\":\"512\",\"height\":\"512\",\"viewBox\":\"0 0 512 512\"};\n\nmodule.exports = Download;\n\nDownload.default = Download;\n","module.exports = __webpack_public_path__ + \"static/media/appstore.e7ddcc40.png\";","var React = require('react');\n\nfunction LogOut (props) {\n    return React.createElement(\"svg\",props,[React.createElement(\"title\",{\"key\":0},\"ionicons-v5-o\"),React.createElement(\"path\",{\"d\":\"M160,256a16,16,0,0,1,16-16H320V136c0-32-33.79-56-64-56H104a56.06,56.06,0,0,0-56,56V376a56.06,56.06,0,0,0,56,56H264a56.06,56.06,0,0,0,56-56V272H176A16,16,0,0,1,160,256Z\",\"key\":1}),React.createElement(\"path\",{\"d\":\"M459.31,244.69l-80-80a16,16,0,0,0-22.62,22.62L409.37,240H320v32h89.37l-52.68,52.69a16,16,0,1,0,22.62,22.62l80-80a16,16,0,0,0,0-22.62Z\",\"key\":2})]);\n}\n\nLogOut.defaultProps = {\"width\":\"512\",\"height\":\"512\",\"viewBox\":\"0 0 512 512\"};\n\nmodule.exports = LogOut;\n\nLogOut.default = LogOut;\n","import React, { Component } from \"react\";\nimport { Polyline, withLeaflet } from \"react-leaflet\";\nimport L from \"leaflet\";\nimport \"leaflet-polylinedecorator\";\n\nlet layerAhh = null;\n\nclass PolylineDecorator extends Component {\n  constructor(props) {\n    super(props);\n    this.polyRef = React.createRef();\n  }\n\n  componentWillUnmount(nextProps) {\n\n      console.log(\"_______________UNMOUNT\")\n      const { map } = this.polyRef.current.props.leaflet;\n      layerAhh.removeFrom(map);\n\n  }\n\n  componentDidMount() {\n\n      console.log(\"_______________DIDMOUNT\")\n\n    const polyline = this.polyRef.current.leafletElement;\n    const { map } = this.polyRef.current.props.leaflet;\n\n    layerAhh = L.polylineDecorator(polyline, {\n        patterns: [ {offset: 0, repeat: 50, symbol: L.Symbol.arrowHead({pixelSize: 8, polygon: false, pathOptions: {stroke: true, color: \"#333047\"}})} ]\n    })\n\n    layerAhh.addTo(map);\n\n  }\n\n  render() {\n    return <Polyline ref={this.polyRef} {...this.props} color=\"#403C58\" />;\n  }\n}\n\nexport default withLeaflet(PolylineDecorator);\n","class Utilities {\n\n    static shorten(str, maxLen, separator = ' ') {\n        if (str.length <= maxLen) return str;\n        return str.substr(0, str.lastIndexOf(separator, maxLen)) + \" ...\";\n    }\n\n    static shortenToChar(str, maxLen) {\n        if (str.length <= maxLen) return str;\n        return str.substr(0, maxLen);\n    }\n\n    static formatDate(dateObj, format) {\n\n    \tvar str = new Date();\n\n    \tif (dateObj !== undefined) {\n    \t\tstr = new Date(dateObj);\n    \t}\n\n    \tvar dateStr = \"\";\n    \tvar monthNames = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n\n    \tvar months;\n    \tvar days;\n    \tvar years;\n    \tvar hours;\n    \tvar minutes;\n\n    \tswitch (format) {\n\n            case \"DD/MM/YY\":\n    \t\t\tmonths = (str.getMonth()+1);\n    \t\t\tdays = (str.getDate());\n    \t\t\tyears = str.getFullYear();\n    \t\t\tif (months < 10) months = \"0\" + months\n    \t\t\tif (days < 10) days = \"0\" + days\n    \t\t\tdateStr = days + \"/\" + months + \"/\" + (years + \"\").substr(0, 2);\n    \t\t\tbreak\n\n            case \"HH:MM DD/MM/YYYY\":\n                months = (str.getMonth()+1);\n                days = (str.getDate());\n                years = str.getFullYear();\n                if (months < 10) months = \"0\" + months\n                if (days < 10) days = \"0\" + days\n                hours = str.getHours()\n                minutes = str.getMinutes()\n                if (hours < 10) hours = \"0\" + hours;\n                if (minutes < 10) minutes = \"0\" + minutes\n                dateStr = hours + \":\" + minutes + \" \" + days + \"/\" + months + \"/\" + years;\n                break;\n\n            case \"mm DD\":\n                months = monthNames[(str.getMonth())];\n                days = (str.getDate());\n                if (days < 10) days = \"0\" + days\n                dateStr = months + \" \" + days;\n                break;\n\n    \t\tdefault:\n    \t\t\tmonths = (str.getMonth()+1);\n    \t\t\tif (months < 10) months = \"0\" + months\n    \t\t\tyears = str.getFullYear();\n    \t\t\tif (years < 10) years = \"0\" + years\n    \t\t\tdays = (str.getDate());\n    \t\t\tif (days < 10) days = \"0\" + days\n    \t\t\thours = str.getHours()\n    \t\t\tif (hours < 10) hours = \"0\" + hours\n    \t\t\tminutes = str.getMinutes()\n    \t\t\tif (minutes < 10) minutes = \"0\" + minutes\n    \t\t\tdateStr = years + \"-\" + months + \"-\" + days + \" \" + hours + \":\" + minutes\n    \t\t\tbreak;\n\n    \t}\n\n    \treturn dateStr;\n\n    }\n\n}\n\nexport default Utilities;\n","import L, { divIcon } from 'leaflet';\nimport React from 'react';\nimport { FeatureGroup, Map, Marker, Polygon, Polyline, TileLayer, withLeaflet, Popup } from 'react-leaflet';\nimport MarkerClusterGroup from 'react-leaflet-markercluster';\nimport 'react-leaflet-markercluster/dist/styles.min.css';\nimport './leaflet.css'\nimport PolylineDecorator from \"./PolylineDecorator\";\nimport Utilities from './Utilities';\n\nclass MapC extends React.Component {\n\n    constructor(props) {\n        super(props);\n        // this.mapRef = createRef();\n        // this.groupRef = createRef();\n        this.preventScrollEventFiring = false;\n        this.state = {\n            zoom: 13,\n            center: [51.505, -0.09],\n            locations: null,\n        }\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n\n        if (nextProps.mode !== this.props.mode) {\n            return true;\n        }\n\n        //console.log(\"SHOULD? \", nextProps.visibleLocations, this.props.visibleLocations)\n        if (nextProps.locations && this.props.locations && nextProps.locations.length === this.props.locations.length) {\n            // console.log(\"SHOULD NO\");\n            return false;\n        }\n\n        // if (nextProps.visibleLocations && this.props.visibleLocations && nextProps.visibleLocations.length !== 0 && this.props.visibleLocations.length !== 0 && nextProps.visibleLocations.length !== this.props.visibleLocations.length && nextProps.visibleLocations[0].id === this.props.visibleLocations[0].id) {\n        //     console.log(\"SHOULD NO HERE\");\n        //     return false;\n        // }\n\n        // console.log(\"SHOULD YES\")\n        return true;\n    }\n\n    // http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\n    // https://api.mapbox.com/styles/v1/kinim0d/ck6cirr3z07rh1iq5fjcjeoni/tiles/512/{z}/{x}/{y}?access_token=pk.eyJ1Ijoia2luaW0wZCIsImEiOiJjazI5MndrMHkyMzY5M2RtcXNvMnFmbXhqIn0.KBRld5RKPh3qAwDkjE3zTA\n\n    render() {\n\n        let locations = JSON.parse(JSON.stringify(this.props.locations))\n        console.log(locations, \"===============------------------------\")\n\n        let path = locations.map(item => {\n            return [parseFloat(item.lat), parseFloat(item.lng)]\n        })\n\n        return (\n            <div id=\"map-container\" data-data={this.props.mapTest}>\n                { (true) &&\n                    <Map id=\"main-map\" className=\"markercluster-map\" center={this.state.center} zoom={this.state.zoom} ref={this.props.mapRef} zoomControl={false} maxZoom={19}>\n                        <TileLayer\n                          attribution='Map data Â© <a href=\"http://openstreetmap.org\">OpenStreetMap</a>'\n                          url=\"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n                        />\n\n                        <FeatureGroup ref={this.props.groupRef}>\n                            <MarkerClusterGroup>\n                            { (this.props.locations) && (this.props.locations.length !== 0) && (this.props.mode === \"path\") &&\n                                <PolylineDecorator positions={path} />\n                             }\n\n                             {/*<Polyline\n                                 positions={this.props.locations.map(item => { return [item.lat, item.lng] })}\n                                 color=\"#403C58\"\n                             />*/}\n\n                            { (this.props.locations) && (this.props.mode === \"point\") && this.props.locations.map(item => {\n                                return (<Marker\n                                    position={[item.lat, item.lng]}\n                                    onClick={() => { this.props.onMarkerClick(item.id); }}\n                                    icon={new divIcon({className: 'marker', html: `<div class=\"marker-custom\"></div>`})\n                                    }\n                                >\n                                <Popup>\n                                    <p>{Utilities.formatDate(item.date, \"HH:MM DD/MM/YYYY\")}</p>\n                                    { (item.house || item.street || item.city || item.country) ?\n                                        <p style={{ marginBottom: 0 }}>\n                                            {(item.house) && item.house + \" \"}\n                                            {(item.street) && item.street + \" \"}\n                                            {(item.city) && item.city + \" \"}\n                                            {(item.country) && item.country + \" \"}\n                                        </p>\n                                        :\n                                        <p style={{ marginBottom: 0 }}>{item.lat},{item.lng}</p>\n                                    }\n                                </Popup>\n                                </Marker>)\n                            }) }\n                            </MarkerClusterGroup>\n                         </FeatureGroup>\n                    </Map>\n                }\n            </div>\n        );\n    }\n\n};\n\n\nexport default MapC;\n","import React, { Component, createRef } from 'react';\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\nimport AES from \"crypto-js/aes\";\nimport EncUTF8 from \"crypto-js/enc-utf8\";\nimport './Dashboard.css';\nimport Map from './Map';\nimport Utilities from './Utilities';\n\n// eslint-disable-next-line import/no-webpack-loader-syntax\nimport LogoutIcon from '-!svg-react-loader!./icons/log-out.svg';\n// eslint-disable-next-line import/no-webpack-loader-syntax\nimport PathIcon from '-!svg-react-loader!./icons/analytics.svg';\n// eslint-disable-next-line import/no-webpack-loader-syntax\nimport PointIcon from '-!svg-react-loader!./icons/apps.svg';\n// eslint-disable-next-line import/no-webpack-loader-syntax\nimport DownloadIcon from '-!svg-react-loader!./icons/download.svg';\n// eslint-disable-next-line import/no-webpack-loader-syntax\nimport DownloadFromAppStore from './icons/appstore.png';\n\nconst bip39 = require('bip39');\nconst DropboxSDK = require('dropbox').Dropbox;\nconst ENCRYPTION_VALIDATOR_MESSAGE = \"Check out https://www.facebook.com/AnimalSanctuary.TH/\"\n\nlet encryptionKey = null;\nlet retrievedEncryptedValidator = null;\n\nclass Dashboard extends Component {\n\n    constructor(props) {\n        super(props)\n        this.mapRef = createRef();\n        this.groupRef = createRef();\n        this.selectedLocationRef = createRef();\n        this.state = {\n            dropboxAuthCode: \"\",\n            encryptionKey: \"\",\n            loadingStatus: null,\n            loggedIn: false,\n\n            selectedDay: null,\n            selectedLocation: null,\n            days: [],\n            day: null,\n\n            mode: \"path\",\n            loading: true\n        }\n    }\n\n    fitBounds() {\n        setTimeout(function() {\n            if (this.state.day && this.state.day.length !== 0) {\n                const group = this.groupRef.current.leafletElement;\n                const map = this.mapRef.current.leafletElement;\n                 let bounds = group.getBounds();\n                 map.fitBounds(bounds);\n            }\n        }.bind(this), 500)\n    }\n\n    async loadDay(day) {\n\n        this.setState({\n            selectedDay: day,\n            loadingStatus: \"Loading \" + day.replace(\".txt\", \"\") + \" (0%)\"\n        })\n\n        if (day.indexOf(\".txt\") !== -1) {\n\n            let content = await (new Promise(function(resolve, reject) {\n                window.dropbox\n                    .filesDownload({path: '/' + day})\n                    .then(async function(data) {\n                        let fr = new FileReader();\n                        fr.onload = async function() {\n                            try {\n                                let decrypted = AES.decrypt(this.result, encryptionKey).toString(EncUTF8)\n                                resolve(JSON.parse(decrypted));\n                            } catch (e) { reject(e); }\n                        };\n                        fr.readAsText(data.fileBlob);\n                    }).catch(function(error) { reject(error) });\n            }))\n\n            for (let j = 0; j < content.length; j++) {\n                if (!content[j].id) {\n                    content[j].id = Math.round((new Date(content[j].date)).getTime());\n                }\n                content[j].longitude = parseFloat(content[j].lng);\n                content[j].latitude = parseFloat(content[j].lat);\n                content[j].bearing = parseFloat(content[j].bearing);\n                content[j].heading = parseFloat(content[j].heading);\n                content[j].altitude = parseFloat(content[j].altitude);\n                content[j].speed = parseFloat(content[j].speed);\n            }\n\n            this.setState({ day: content.sort((a, b) => { return (a.id > b.id) }), loadingStatus: null }, function() {\n                this.setState({ mode: (this.state.mode === \"path\") ? \"point\" : \"path\" }, function() {\n                    setTimeout(function() {\n                        this.setState({ mode: (this.state.mode === \"path\") ? \"point\" : \"path\" })\n                    }.bind(this), 200);\n                })\n            })\n\n        } else {\n\n            let dayFiles = await window.dropbox.filesListFolder({path: '/' + day, limit: 2000});\n            let allDayFiles = dayFiles.entries;\n\n            while (dayFiles.has_more) {\n                dayFiles = await window.dropbox.filesListFolderContinue({cursor: dayFiles.cursor});\n                allDayFiles = allDayFiles.concat(dayFiles.entries)\n            }\n\n            allDayFiles = allDayFiles.map(item => {\n                return item.name\n            })\n\n            allDayFiles = allDayFiles.sort().reverse();\n\n            let contents = []\n            // let pending = 0;\n\n            await (new Promise(async function(resolve, reject) {\n\n                for (let j = 0; j < allDayFiles.length; j++) {\n\n                    console.log(\"Requesting\");\n\n                    new Promise(function(resolve, reject) {\n\n                        let fileSub = allDayFiles[j];\n                        let fileSubId = fileSub.replace(\".txt\", \"\")\n\n                        window.dropbox\n                            .filesDownload({path: '/' + day + \"/\" + fileSub})\n                            .then(async function(data) {\n                                let fr = new FileReader();\n                                fr.onload = async function() {\n                                    try {\n                                        let decrypted = AES.decrypt(this.result, encryptionKey).toString(EncUTF8)\n                                        resolve({\n                                            content: JSON.parse(decrypted),\n                                            fileSub: fileSub,\n                                            fileSubId: fileSubId,\n                                        });\n                                    } catch (e) { reject(e); }\n                                };\n                                fr.readAsText(data.fileBlob);\n                            }).catch(function(error) { reject(error) });\n\n                    }).then(function(data) {\n\n                        let content = data.content;\n\n                        content.id = data.fileSubId;\n                        content.longitude = parseFloat(content.lng);\n                        content.latitude = parseFloat(content.lat);\n                        content.bearing = parseFloat(content.bearing);\n                        content.heading = parseFloat(content.heading);\n                        content.altitude = parseFloat(content.altitude);\n                        content.speed = parseFloat(content.speed);\n                        contents.push(content);\n\n                        this.setState({\n                            loadingStatus: \"Loading \" + day.replace(\".txt\", \"\") + \" (\" + (Math.round(contents.length/allDayFiles.length*100)) + \"%)\"\n                        })\n\n                        if (contents.length === allDayFiles.length) {\n                            resolve();\n                        }\n\n                    }.bind(this))\n\n                    await (new Promise(function(resolve, reject) {\n                        setTimeout(function() {\n                            resolve()\n                        }.bind(this), 200);\n                    }))\n\n                }\n\n            }.bind(this))).catch(function(err) {\n                console.log(\"FAILED\", err);\n                this.setState({\n                    loadingStatus: null\n                });\n                alert(\"Failed to get some locations, please try again\");\n            })\n\n            console.log(\"YUP< GOT IT ALL\", contents)\n\n            this.setState({ day: contents.sort((a, b) => { return (a.id > b.id) }), loadingStatus: null }, function() {\n                this.setState({ mode: (this.state.mode === \"path\") ? \"point\" : \"path\" }, function() {\n                    setTimeout(function() {\n                        this.setState({ mode: (this.state.mode === \"path\") ? \"point\" : \"path\" })\n                    }.bind(this), 200);\n                })\n            })\n\n        }\n\n        this.fitBounds();\n\n    }\n\n    async loadDays() {\n\n        this.setState({ loadingStatus: \"Loading days\" })\n\n        let newFiles = await window.dropbox.filesListFolder({path: '', limit: 2000});\n        let allFiles = newFiles.entries;\n\n        while (newFiles.has_more) {\n            newFiles = await window.dropbox.filesListFolderContinue({cursor: newFiles.cursor});\n            allFiles = allFiles.concat(newFiles.entries)\n        }\n\n        allFiles = allFiles.map(item => {\n            return item.name\n        })\n\n        allFiles = allFiles.sort().reverse();\n\n        for (let i = 0; i < allFiles.length; i++) {\n\n            let file = allFiles[i]\n\n            if (file === \"DO-NOT-DELETE-encryption-validator.txt\") {\n                allFiles.splice(i, 1);\n                i--;\n                continue;\n            }\n\n            if (file.indexOf(\".txt\") !== -1) {\n                let folderName = file.replace(\".txt\", \"\");\n                allFiles.splice(allFiles.indexOf(folderName), 1)\n                continue;\n            }\n\n        }\n\n        // allFiles.reverse();\n\n        this.setState({\n            days: allFiles,\n            loading: false,\n            loadingStatus: null,\n        })\n\n    }\n\n    componentDidMount() {\n\n        let url = window.location.href;\n        if (url.indexOf(\"r=\") !== -1) {\n            this.setState({\n                loadingStatus: \"Loading assets\"\n            })\n        }\n\n        if (this.props.match.params && this.props.match.params.authcode && this.props.match.params.encryptionkey) {\n            this.setState({\n                dropboxAuthCode: this.props.match.params.authcode,\n                encryptionPhrase: this.props.match.params.encryptionkey.replace(/-/g, ' ')\n            }, function() {\n                this.login();\n            })\n        }\n\n    }\n\n    downloadDay() {\n\n        var element = document.createElement('a');\n        element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(JSON.stringify(this.state.day)));\n        element.setAttribute('download', this.state.selectedDay.replace(\".txt\", \"\") + \".json\");\n\n        element.style.display = 'none';\n        document.body.appendChild(element);\n\n        element.click();\n\n        document.body.removeChild(element);\n\n    }\n\n    onInputChange = (e) => {\n        let modifiedField = e.target.id;\n        let modifiedFieldValue = e.target.value;\n        let state = {...this.state};\n        state[modifiedField] = modifiedFieldValue;\n        this.setState(state);\n    }\n\n    async login() {\n\n        this.setState({\n            errorMsg: null,\n            loadingStatus: \"Authenticating\"\n        })\n\n        if (!this.state.dropboxAuthCode || !this.state.encryptionPhrase) {\n            this.setState({\n                errorMsg: \"Please enter both your dropdox auth code and encryption key\",\n                loadingStatus: null\n            })\n            return;\n        }\n\n        window.dropbox = new DropboxSDK({ accessToken: this.state.dropboxAuthCode });\n\n        let retrievedEncryptedValidator = await (new Promise(function(resolve, reject) {\n\n            window.dropbox\n                .filesDownload({path: '/DO-NOT-DELETE-encryption-validator.txt'})\n                .then(async function(data) {\n                    let fr = new FileReader();\n                    fr.onload = async function() {\n                        resolve(this.result)\n                    };\n                    fr.readAsText(data.fileBlob);\n                }.bind(this)).catch(function(error) {\n                    if (error && (error.status === 400 || error.status === 401)) {\n                        return reject(\"Invalid Authentication Code\")\n                    } else if (error && error.status === 404) {\n                        return reject(\"No Locations Detected\")\n                    } else {\n                        return reject(\"Unexpected Error\");\n                        console.error(error)\n                    }\n                }.bind(this))\n\n        })).catch(e => {\n            this.setState({\n                errorMsg: e,\n                loadingStatus: null\n            })\n        })\n\n        if (retrievedEncryptedValidator) {\n\n            let seed, decrypted;\n\n            try {\n                seed = await bip39.mnemonicToSeed(this.state.encryptionPhrase).then(bytes => bytes.toString('hex'));\n                decrypted = AES.decrypt(retrievedEncryptedValidator, seed).toString(EncUTF8)\n            } catch (e) {\n                console.log(e)\n                this.setState({\n                    errorMsg: \"Invalid Encryption Key\",\n                    loadingStatus: null\n                })\n                return;\n            }\n\n            if (decrypted === ENCRYPTION_VALIDATOR_MESSAGE) {\n                encryptionKey = seed\n                this.setState({\n                    encryptionKey: seed,\n                    loggedIn: true\n                }, function() {\n                    this.loadDays();\n                })\n            } else {\n                this.setState({\n                    errorMsg: \"Invalid Encryption Key\",\n                    loadingStatus: null\n                })\n                return;\n            }\n\n        }\n\n    }\n\n    render() {\n\n        if (!this.state.loggedIn) {\n            return (\n                <div className=\"login\">\n                    { (this.state.loadingStatus !== null) &&\n                        <div className=\"full-screen-loading\">\n                            <div>\n                                <svg className=\"spinner\" viewBox=\"0 0 50 50\">\n                                     <circle className=\"path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\" strokeWidth=\"5\"></circle>\n                                 </svg>\n                                 <h1>{this.state.loadingStatus}</h1>\n                            </div>\n                        </div>\n                    }\n                    <div className=\"login-container\">\n                        <h1>Log in</h1>\n                        <p>The authentication and encryption keys are only saved to this browser tab and deleted when this tab is closed.</p>\n                        <div className=\"form\">\n                            <div className=\"form-group\">\n                                <label>Dropbox Auth Code</label>\n                                <input onChange={this.onInputChange} defaultValue={this.state.dropboxAuthCode} type=\"auth-code\" name=\"auth-code\" id=\"dropboxAuthCode\" placeholder=\"Dropbox Auth Code\" />\n                            </div>\n                            <p style={{ marginTop: -5, cursor: 'pointer' }} onClick={() => { window.open(\"/get-auth-code\") }}>Get Dropbox Auth Code</p>\n                            <div className=\"form-group\">\n                                <label>Encryption Key</label>\n                                <input onChange={this.onInputChange} defaultValue={this.state.encryptionPhrase} type=\"encryption-key\" name=\"encryption-key\" id=\"encryptionPhrase\" placeholder=\"Encryption Key\" />\n                            </div>\n                            <button className=\"register-btn button primary\" onClick={(e) => { this.login(e) }}>\n                                Log in\n                            </button>\n                            <a style={{ padding: 0 }} href=\"https://itunes.apple.com/gb/app/id1512069004\" target=\"_blank\">\n                                <img src={DownloadFromAppStore} />\n                            </a>\n                            { (this.state.errorMsg) &&\n                                <div className=\"error-msg\">{this.state.errorMsg}</div>\n                            }\n                        </div>\n                    </div>\n                </div>\n            )\n        }\n\n        return (\n            <div className=\"dashboard\">\n                { (this.state.loadingStatus !== null) &&\n                    <div className=\"full-screen-loading\">\n                        <div>\n                            <svg className=\"spinner\" viewBox=\"0 0 50 50\">\n                                 <circle className=\"path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\" strokeWidth=\"5\"></circle>\n                             </svg>\n                             <h1>{this.state.loadingStatus}</h1>\n                        </div>\n                    </div>\n                }\n                <div className=\"days\">\n                    <h2>Days</h2>\n                    { (this.state.days) &&\n                        <div className=\"list\">\n                            { this.state.days.map(day => {\n                                return (\n                                    <span key={day} data-selected={(this.state.selectedDay === day)} style={{ fontWeight: 700 }} onClick={() => { this.loadDay(day) }}>{ (day.replace(\".txt\", \"\")) }</span>\n                                )\n                            }) }\n                        </div>\n                    }\n                </div>\n                <div className=\"locations\">\n                    <h2>Locations</h2>\n                    { (this.state.day) &&\n                        <div className=\"list\">\n                            { this.state.day.map(item => {\n                                return (\n                                    <div ref={this.selectedLocationRef} data-selected={(this.state.selectedLocation === item.id)} onClick={() => {\n                                        this.setState({ selectedLocation: item.id })\n                                        const map = this.mapRef.current.leafletElement;\n                                        map.setView({lat: item.lat, lng: item.lng}, 21);\n                                    }}>\n                                        <p style={{ fontWeight: 700, marginTop: 4, marginBottom: 0 }}>{Utilities.formatDate(item.date, \"HH:MM DD/MM/YYYY\")}</p>\n                                        { (item.house || item.street || item.city || item.country) ?\n                                            <p style={{ marginBottom: 0 }}>\n                                                {(item.house) && item.house + \" \"}\n                                                {(item.street) && item.street + \" \"}\n                                                {(item.city) && item.city + \" \"}\n                                                {(item.country) && item.country + \" \"}\n                                            </p>\n                                            :\n                                            <p style={{ marginBottom: 0 }}>{item.lat},{item.lng}</p>\n                                        }\n                                    </div>\n                                )\n                            }) }\n                        </div>\n                    }\n                    { (!this.state.day) &&\n                        <div className=\"list\">\n                            <div style={{ border: 'none' }}>\n                                <p style={{ marginBotton: 0 }}>Select a day to inspect locations</p>\n                            </div>\n                        </div>\n                    }\n                </div>\n                <div className=\"map\">\n                    <Map\n                        locations={this.state.day ? this.state.day : []}\n                        mapRef={this.mapRef}\n                        groupRef={this.groupRef}\n                        onMarkerClick={this.onMarkerClick}\n                        mode={this.state.mode}\n                        onMarkerClick={async (id) => {\n                            console.log(\"ID: \" + id);\n                            this.setState({ selectedLocation: id }, function() {\n                                setTimeout(function() {\n                                    console.log(this.selectedLocationRef)\n                                }.bind(this), 100);\n                            })\n                            // const map = this.mapRef.current.leafletElement;\n                            // map.setView({lat: item.lat, lng: item.lng}, 21);\n                        }}\n                    />\n                </div>\n                { (this.state.day) &&\n                    <div className=\"options\">\n                        { (this.state.mode === \"path\") ?\n                            <PathIcon onClick={() => { this.setState({ mode: \"point\" }) }} />\n                            :\n                            <PointIcon onClick={() => { this.setState({ mode: \"path\" }) }} />\n                        }\n                        <DownloadIcon onClick={() => { this.downloadDay() }} />\n                    </div>\n                }\n            </div>\n        );\n\n    }\n\n}\n\nexport default Dashboard;\n","import React, { Component, createRef } from 'react';\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\n\nconst DropboxSDK = require('dropbox').Dropbox;\nconst CLIENT_ID = '5o4k8uv2pegwprw';\n\nclass DropboxAuth extends Component {\n\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            authCode: \"\",\n            authLink: \"\",\n            copyToClipboardText: \"Copy Code\"\n        }\n    }\n\n    componentDidMount() {\n\n        if (this.props.location && this.props.location.hash.indexOf(\"access_token\") !== -1) {\n\n            console.log(\"GOT IT: \" + this.props.location.hash);\n            let ret = {};\n\n            this.props.location.hash.split('&').forEach(function (param) {\n              var parts = param.replace(/\\+/g, ' ').split('=');\n              var key = parts.shift();\n              var val = parts.length > 0 ? parts.join('=') : undefined;\n\n              key = decodeURIComponent(key);\n\n              val = val === undefined ? null : decodeURIComponent(val);\n\n              if (ret[key] === undefined) {\n                ret[key] = val;\n              } else if (Array.isArray(ret[key])) {\n                ret[key].push(val);\n              } else {\n                ret[key] = [ret[key], val];\n              }\n            });\n\n            if (ret[\"#access_token\"]) {\n                this.setState({\n                    authCode: ret[\"#access_token\"],\n                    authLink: \"\"\n                })\n            }\n\n        } else {\n            var dbx = new DropboxSDK({ clientId: CLIENT_ID });\n            var authUrl = dbx.getAuthenticationUrl('https://d0minyk.github.io/private-location-tracker/get-auth-code');\n            this.setState({ authLink: authUrl })\n        }\n\n    }\n\n    authenticate() {\n\n    }\n\n    render() {\n\n        return (\n            <div className=\"login\">\n                <div className=\"login-container\">\n                    <h1>{ (this.state.authCode) ? \"Successfully Authenticated\" : \"Authenticate Dropbox\" }</h1>\n                    <p>{ (this.state.authCode) ? \"Copy the below code into the application\" : \"Get an authentication code from Dropbox that let's you to back up your locations.\" }</p>\n                    <div className=\"form\">\n                        { (this.state.authCode) &&\n                            <div className=\"code\" style={{ wordBreak: \"break-all\" }}>\n                                {this.state.authCode}\n                            </div>\n                        }\n                        { (this.state.authCode) &&\n                            <button style={{ width: '100%', marginTop: 15 }} onClick={() => {\n\n                                if (navigator && navigator.clipboard) {\n                                    navigator.clipboard.writeText(this.state.authCode).then(function() {\n                                        this.setState({ copyToClipboardText: \"Copied!\" })\n                                    }.bind(this), function(err) {\n                                        this.setState({ copyToClipboardText: \"Failed to copy!\" })\n                                    }.bind(this));\n                                } else {\n                                    this.setState({ copyToClipboardText: \"Failed to copy!\" })\n                                }\n\n                            }}>{this.state.copyToClipboardText}</button>\n                        }\n                        { (this.state.authLink) &&\n                            <a style={{ width: '100%', margin: 0 }} href={this.state.authLink} className=\"register-btn button primary\">\n                                Log in\n                            </a>\n                        }\n                    </div>\n                </div>\n            </div>\n        )\n\n    }\n\n}\n\nexport default DropboxAuth;\n","import React, { Component, createRef } from 'react';\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\n\nconst DropboxSDK = require('dropbox').Dropbox;\nconst CLIENT_ID = '5o4k8uv2pegwprw';\n\nclass Terms extends Component {\n\n    render() {\n\n        return (\n            <div className=\"terms\" style={{ margin: 15 }}>\n\n                <h1>Legal</h1>\n\n                <p>Your access to and use of the app is conditioned upon your acceptance of and compliance with these Terms and Conditions and Privacy Policy. If you disagree with any part then you do not have permission to use our service.</p>\n\n    \t\t\t<ul class=\"links\">\n    \t\t\t\t<li><a href=\"#terms\">Terms and Conditions (Last updated 19/05/2020)</a></li>\n    \t\t\t\t<li><a href=\"#privacy\">Privacy Policy (Last updated 19/05/2020)</a></li>\n    \t\t\t</ul>\n\n    \t\t\t<div id=\"terms\">\n\n    \t\t\t\t<h2>Terms & Conditions</h2>\n\n    \t\t\t\t<h3>Disclaimer</h3>\n    \t\t\t\t<p>Your use of the Service is at your sole risk. The Service is provided on an \"AS IS\" and \"AS AVAILABLE\" basis. The Service is provided without warranties of any kind, whether express or implied.</p>\n                    <p>Only you hold your encrpytion keys, losing them will make all your locations inaccessble.</p>\n\n    \t\t\t\t<p>We do not warrant that</p>\n    \t\t\t\t<ul>\n    \t\t\t\t\t<li>the Service will function uninterrupted, secure or available at any particular time or location</li>\n    \t\t\t\t\t<li>any errors or defects will be corrected</li>\n    \t\t\t\t</ul>\n\n    \t\t\t</div>\n\n    \t\t\t<div id=\"privacy\">\n\n    \t\t\t\t<h2>Privacy Policy</h2>\n\n    \t\t\t\t<p>We cannot and will not collect, use or share your personal information and locations with anyone.</p>\n\n    \t\t\t</div>\n            </div>\n        )\n\n    }\n\n}\n\nexport default Terms;\n","import React, { Component } from 'react';\nimport { BrowserRouter, Route, Switch, Redirect } from \"react-router-dom\";\n\nimport Dashboard from './Dashboard.js';\nimport DropboxAuth from './DropboxAuth.js';\nimport Terms from './Terms.js';\n\nclass App extends Component {\n\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        return (\n            <div>\n                <BrowserRouter>\n                    <div style={{ background: 'white' }}>\n                        <Switch>\n                            <Route path={process.env.PUBLIC_URL + \"/\"} component={ Dashboard } exact></Route>\n                            <Route path={process.env.PUBLIC_URL + \"/terms\"} component={ Terms } exact></Route>\n                            <Route path={process.env.PUBLIC_URL + \"/get-auth-code\"} component={ DropboxAuth } exact></Route>\n                            <Route path={process.env.PUBLIC_URL + \"/:authcode/:encryptionkey\"} component={ Dashboard } exact></Route>\n                        </Switch>\n                    </div>\n                </BrowserRouter>\n            </div>\n        );\n    }\n\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n        console.log(\"REG\", registration);\n\n        setTimeout(function() {\n            if (registration && registration.active && registration.active.onstatechange === null) {\n                console.log(\"ALREADY CACHED\");\n                let url = window.location.href;\n                if (url.indexOf(\"r=\") !== -1) {\n                    window.location.href = (\"http://d0minyk.github.io/private-location-tracker/\" + url.substr(url.indexOf(\"r=\") + 2, url.length)).replace(\"%2F\", \"/\");\n                }\n            } else {\n                console.log(\"WAITING TO BE CACHED\")\n            }\n        }, 200);\n\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n              let url = window.location.href;\n              if (url.indexOf(\"r=\") !== -1) {\n                  window.location.href = (\"http://d0minyk.github.io/private-location-tracker/\" + url.substr(url.indexOf(\"r=\") + 2, url.length)).replace(\"%2F\", \"/\");\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import \"babel-polyfill\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport registerServiceWorker from './registerServiceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\nregisterServiceWorker();\n"],"sourceRoot":""}